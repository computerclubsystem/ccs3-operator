<mat-card *transloco="let t;">
  @let role = signals.role();
  <mat-card-header>
    <mat-card-title>
      @if (signals.isCreate()){
      {{t('Create role')}}
      } @else {
      {{t('Edit role')}} {{role?.id}}
      }
    </mat-card-title>
    <mat-card-subtitle>
      @if (signals.isLoading()){
      <span>{{t('Loading...')}}</span>
      }
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    @if (!signals.isLoading()) {
    <form [formGroup]="form" class="ccs3-op-flex-column ccs3-op-max-width-large-text">
      <mat-form-field>
        <mat-label>{{t('Name')}}</mat-label>
        <input matInput type="text" [formControl]="form.controls.name" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>{{t('Description')}}</mat-label>
        <input matInput type="text" [formControl]="form.controls.description" />
      </mat-form-field>
      <mat-checkbox [formControl]="form.controls.enabled">{{t('Active')}}</mat-checkbox>
    </form>
    <section class="permissions-selection ccs3-op-flex-row ccs3-op-align-items-flex-start">
      <ccs3-op-linked-lists [availableItemsTitle]="t('Available permissions')"
        [availableItems]="signals.availablePermissions()" [selectedItemsTitle]="t('Role permissions')"
        [selectedItems]="signals.rolePermissions()">
      </ccs3-op-linked-lists>
    </section>
    }
  </mat-card-content>
  <mat-card-actions>
    <section class="ccs3-op-flex-row">
      <button (click)="onSave()" mat-flat-button [disabled]="form.invalid">
        @if (signals.isCreate()) {
        {{t('Create')}}
        } @else {
        {{t('Update')}}
        }
      </button>
      <button (click)="onGoToList()" mat-raised-button>{{t('Go back to list')}}</button>
    </section>
  </mat-card-actions>
</mat-card>
